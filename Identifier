while not game:IsLoaded() do task.wait() end
local Players = game:GetService("Players")
local Me = Players.LocalPlayer
local sock
if WebSocket then
sock = WebSocket.connect("wss://lol.rgsrseraeew.repl.co")
sock.OnClose:Connect(function()
sock = WebSocket.connect("wss://lol.rgsrseraeew.repl.co")
end)
	elseif WebsocketClient then
	sock = WebsocketClient.new("wss://lol.rgsrseraeew.repl.co")
local OldIndex = nil
OldIndex = hookmetamethod(game, "__index", function(Self, Key)
    if not checkcaller() and Self == sock and Key == "OnMessage" then
        return sock.DataReceived
    end
    return OldIndex(Self, Key)
end)
sock.ConnectClosed:Connect(function()
sock = WebsocketClient.new("wss://lol.rgsrseraeew.repl.co")
end)
	else
 sock = syn.websocket.connect("wss://lol.rgsrseraeew.repl.co")
sock.OnClose:Connect(function()
sock = syn.websocket.connect("wss://lol.rgsrseraeew.repl.co")
end)
end

function stringtocolor(str)
 return Color3.new(table.unpack(str:gsub(" ",""):split(",")))
end

repeat task.wait() until Me.Character:FindFirstChild("Head")
Me.Character.Head:WaitForChild("NameGui")
pcall(function()Me.Character.Head:FindFirstChild("NameGui").Frame.RoleSlot:Destroy()end)
local ExploiterGui = Me.Character.Head:FindFirstChild("NameGui"):Clone()
ExploiterGui.Parent = Me.Character.Head:FindFirstChild("NameGui").Parent
ExploiterGui.Name = "ExploiterGui"
ExploiterGui.StudsOffset = Vector3.new(0,1.8,0)
ExploiterGui.Frame.NameSlot.Text = getgenv().MyName
ExploiterGui.Frame.NameSlot.TextColor3 = getgenv().MyColor
ExploiterGui.Frame.NameSlot.TextStrokeColor3 = getgenv().MyStroke
ExploiterGui.Frame.NameSlot.RichText = getgenv().RichText

sock:Send(Me.Name..":"..getgenv().MyName..":"..tostring(getgenv().MyColor)..":"..tostring(getgenv().MyStroke)..":"..tostring(getgenv().RichText)..":Joined")
    
Me.CharacterAdded:Connect(function()
    repeat task.wait() until Me.Character:FindFirstChild("Head")
    Me.Character.Head:WaitForChild("NameGui")
    pcall(function()Me.Character.Head:FindFirstChild("NameGui").Frame.RoleSlot:Destroy()end)
    if not Me.Character.Head:FindFirstChild("ExploiterGui") then
    local ExploiterGui = Me.Character.Head:FindFirstChild("NameGui"):Clone()
    ExploiterGui.Parent = Me.Character.Head:FindFirstChild("NameGui").Parent
    ExploiterGui.Name = "ExploiterGui"
    ExploiterGui.StudsOffset = Vector3.new(0,1.8,0)
    ExploiterGui.Frame.NameSlot.Text = getgenv().MyName
    ExploiterGui.Frame.NameSlot.TextColor3 = getgenv().MyColor
    ExploiterGui.Frame.NameSlot.TextStrokeColor3 = getgenv().MyStroke
    ExploiterGui.Frame.NameSlot.RichText = getgenv().RichText
    if getgenv().RichText == true then

    end
    sock:Send(Me.Name..":"..getgenv().MyName..":"..tostring(getgenv().MyColor)..":"..tostring(getgenv().MyStroke)..":"..tostring(getgenv().RichText))
end
end)

sock.OnMessage:Connect(function(data)
    local data = data:split(":")
    if Players:FindFirstChild(data[1]) then
        if data[1] ~= Me.Name then
        repeat task.wait() until Players:FindFirstChild(data[1]).Character
        repeat task.wait() until Players:FindFirstChild(data[1]).Character:FindFirstChild("Head")
        repeat task.wait() until Players:FindFirstChild(data[1]).Character.Head:FindFirstChild("NameGui")
	if not Players:FindFirstChild(data[1]).Character.Head:FindFirstChild("ExploiterGui") then
        pcall(function()Players:FindFirstChild(data[1]).Character.Head:FindFirstChild("NameGui").Frame.RoleSlot:Destroy()end)
        local ExploiterGui = Players:FindFirstChild(data[1]).Character.Head:FindFirstChild("NameGui"):Clone()
        ExploiterGui.Parent = Players:FindFirstChild(data[1]).Character.Head:FindFirstChild("NameGui").Parent
        ExploiterGui.Name = "ExploiterGui"
        ExploiterGui.StudsOffset = Vector3.new(0,1.8,0)
        ExploiterGui.Frame.NameSlot.Text = data[2]
        ExploiterGui.Frame.NameSlot.TextColor3 = stringtocolor(data[3])
        ExploiterGui.Frame.NameSlot.TextStrokeColor3 = stringtocolor(data[4])
	if data[5] == "true" then
	ExploiterGui.Frame.NameSlot.RichText = data[5]

	end
        if data[6] then
            sock:Send(Me.Name..":"..getgenv().MyName..":"..tostring(getgenv().MyColor)..":"..tostring(getgenv().MyStroke)..":"..tostring(getgenv().RichText))
            end
        end
	end
        end
    end)
